# OmniAvatar Frontend

ç°ä»£åŒ–çš„ React + TypeScript å‰ç«¯åº”ç”¨ï¼Œç”¨äº OmniAvatar æµå¼è§†é¢‘ç”Ÿæˆã€‚

## ç‰¹æ€§

- âœ¨ **ç°ä»£æŠ€æœ¯æ ˆ**: React 18 + TypeScript + Vite
- ğŸ¨ **ç¾è§‚ UI**: Tailwind CSS + Lucide Icons
- ğŸ”Œ **å®æ—¶é€šä¿¡**: Socket.IO å®¢æˆ·ç«¯
- ğŸ¬ **æµå¼æ’­æ”¾**: å®æ—¶è§†é¢‘å¸§æ¸²æŸ“å’ŒéŸ³é¢‘åŒæ­¥
- ğŸ“¦ **çŠ¶æ€ç®¡ç†**: Zustand è½»é‡çº§çŠ¶æ€ç®¡ç†
- ğŸ¯ **ç±»å‹å®‰å…¨**: å®Œæ•´çš„ TypeScript ç±»å‹å®šä¹‰
- ğŸ”Š **éŸ³é¢‘æ§åˆ¶**: Web Audio API é«˜æ€§èƒ½éŸ³é¢‘æ’­æ”¾
- ğŸ“± **å“åº”å¼è®¾è®¡**: æ”¯æŒå„ç§å±å¹•å°ºå¯¸

## æ¶æ„è®¾è®¡

### ç›®å½•ç»“æ„

```
frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/        # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ AudioRecorder.tsx       # éŸ³é¢‘å½•åˆ¶ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ AudioControls.tsx       # éŸ³é¢‘æ§åˆ¶é¢æ¿
â”‚   â”‚   â”œâ”€â”€ ImageUploader.tsx       # å›¾ç‰‡ä¸Šä¼ ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ VideoPlayer.tsx         # è§†é¢‘æ’­æ”¾å™¨
â”‚   â”‚   â”œâ”€â”€ ConnectionStatus.tsx    # è¿æ¥çŠ¶æ€æŒ‡ç¤ºå™¨
â”‚   â”‚   â”œâ”€â”€ MessageNotifications.tsx # æ¶ˆæ¯é€šçŸ¥
â”‚   â”‚   â””â”€â”€ ProgressBar.tsx         # è¿›åº¦æ¡
â”‚   â”œâ”€â”€ hooks/            # è‡ªå®šä¹‰ Hooks
â”‚   â”‚   â”œâ”€â”€ useSocket.ts           # Socket è¿æ¥ Hook
â”‚   â”‚   â”œâ”€â”€ useVideoPlayer.ts      # è§†é¢‘æ’­æ”¾ Hook
â”‚   â”‚   â””â”€â”€ useAudioPlayer.ts      # éŸ³é¢‘æ’­æ”¾ Hook
â”‚   â”œâ”€â”€ services/         # æœåŠ¡å±‚
â”‚   â”‚   â”œâ”€â”€ SocketService.ts       # WebSocket æœåŠ¡
â”‚   â”‚   â””â”€â”€ AudioService.ts        # éŸ³é¢‘æœåŠ¡
â”‚   â”œâ”€â”€ store/            # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â””â”€â”€ useAppStore.ts         # åº”ç”¨çŠ¶æ€ Store
â”‚   â”œâ”€â”€ types/            # TypeScript ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ socket.ts              # Socket äº‹ä»¶ç±»å‹
â”‚   â”‚   â”œâ”€â”€ media.ts               # åª’ä½“ç±»å‹
â”‚   â”‚   â””â”€â”€ app.ts                 # åº”ç”¨ç±»å‹
â”‚   â”œâ”€â”€ utils/            # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ helpers.ts             # é€šç”¨è¾…åŠ©å‡½æ•°
â”‚   â”œâ”€â”€ styles/           # æ ·å¼æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ index.css              # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ App.tsx           # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â””â”€â”€ main.tsx          # åº”ç”¨å…¥å£
â”œâ”€â”€ public/               # é™æ€èµ„æº
â”œâ”€â”€ index.html           # HTML æ¨¡æ¿
â”œâ”€â”€ package.json         # ä¾èµ–é…ç½®
â”œâ”€â”€ tsconfig.json        # TypeScript é…ç½®
â”œâ”€â”€ vite.config.ts       # Vite é…ç½®
â””â”€â”€ tailwind.config.js   # Tailwind é…ç½®
```

### æ ¸å¿ƒè®¾è®¡åŸåˆ™

#### 1. é«˜å†…èšä½è€¦åˆ

- **æœåŠ¡å±‚**: `SocketService` å’Œ `AudioService` å°è£…æ‰€æœ‰å¤–éƒ¨é€šä¿¡
- **ç»„ä»¶åŒ–**: æ¯ä¸ªç»„ä»¶è´Ÿè´£å•ä¸€åŠŸèƒ½ï¼Œç‹¬ç«‹å¯å¤ç”¨
- **Hooks**: è‡ªå®šä¹‰ Hooks å°è£…ä¸šåŠ¡é€»è¾‘ï¼Œç»„ä»¶åªè´Ÿè´£æ¸²æŸ“

#### 2. ç±»å‹å®‰å…¨

- å®Œæ•´çš„ TypeScript ç±»å‹å®šä¹‰
- Socket äº‹ä»¶ç±»å‹åŒ–ï¼Œé¿å…è¿è¡Œæ—¶é”™è¯¯
- ä¸¥æ ¼çš„ç¼–è¯‘å™¨æ£€æŸ¥

#### 3. çŠ¶æ€ç®¡ç†

- Zustand æä¾›è½»é‡çº§çŠ¶æ€ç®¡ç†
- å•ä¸€æ•°æ®æºï¼Œé¿å…çŠ¶æ€ä¸ä¸€è‡´
- æ¸…æ™°çš„çŠ¶æ€æ›´æ–°é€»è¾‘

#### 4. éŸ³è§†é¢‘åŒæ­¥æœºåˆ¶

- **è§†é¢‘æ’­æ”¾**: ä½¿ç”¨ Canvas ç»˜åˆ¶å¸§ï¼ŒrequestAnimationFrame æ§åˆ¶å¸§ç‡
- **éŸ³é¢‘æ’­æ”¾**: Web Audio API ç²¾ç¡®æ§åˆ¶éŸ³é¢‘æ—¶åº
- **åŒæ­¥ç­–ç•¥**: 
  - å¸§é˜Ÿåˆ—ç®¡ç†ï¼Œç¡®ä¿é¡ºåºæ’­æ”¾
  - éŸ³é¢‘ç‰‡æ®µç²¾ç¡®è°ƒåº¦ï¼Œé¿å…å¡é¡¿
  - ç‹¬ç«‹çš„æ’­æ”¾æ§åˆ¶ï¼Œäº’ä¸å¹²æ‰°

## å¼€å‘æŒ‡å—

### å®‰è£…ä¾èµ–

```bash
npm install
```

### å¼€å‘æ¨¡å¼

```bash
npm run dev
```

è®¿é—® http://localhost:8080

### ç”Ÿäº§æ„å»º

```bash
npm run build
```

### é¢„è§ˆç”Ÿäº§ç‰ˆæœ¬

```bash
npm run preview
```

## Socket æ¥å£

### å®¢æˆ·ç«¯äº‹ä»¶

- `join_session`: åŠ å…¥ä¼šè¯
- `leave_session`: ç¦»å¼€ä¼šè¯
- `generate_streaming_base64`: å‘é€ç”Ÿæˆè¯·æ±‚

### æœåŠ¡ç«¯äº‹ä»¶

- `connected`: è¿æ¥ç¡®è®¤
- `generation_started`: ç”Ÿæˆå¼€å§‹
- `video_frame`: è§†é¢‘å¸§æ•°æ®ï¼ˆä¸»è¦æ¨¡å¼ï¼‰
- `video_chunk`: è§†é¢‘å—æ•°æ®ï¼ˆå¤‡ç”¨æ¨¡å¼ï¼‰
- `generation_progress`: ç”Ÿæˆè¿›åº¦
- `generation_complete`: ç”Ÿæˆå®Œæˆ
- `generation_error`: ç”Ÿæˆé”™è¯¯
- `error`: æœåŠ¡å™¨é”™è¯¯

## æŠ€æœ¯æ ˆ

- **React 18**: UI æ¡†æ¶
- **TypeScript**: ç±»å‹å®‰å…¨
- **Vite**: æ„å»ºå·¥å…·
- **Tailwind CSS**: æ ·å¼æ¡†æ¶
- **Zustand**: çŠ¶æ€ç®¡ç†
- **Socket.IO Client**: WebSocket é€šä¿¡
- **Lucide React**: å›¾æ ‡åº“

## æµè§ˆå™¨æ”¯æŒ

- Chrome/Edge 90+
- Firefox 88+
- Safari 14+

## æ€§èƒ½ä¼˜åŒ–

- æ‡’åŠ è½½ç»„ä»¶
- é˜²æŠ–/èŠ‚æµå¤„ç†
- è™šæ‹Ÿæ»šåŠ¨ï¼ˆå¦‚éœ€è¦ï¼‰
- å›¾ç‰‡å‹ç¼©
- éŸ³é¢‘/è§†é¢‘æµå¼ä¼ è¾“

## è®¸å¯

æŸ¥çœ‹é¡¹ç›®æ ¹ç›®å½•çš„ LICENSE æ–‡ä»¶

